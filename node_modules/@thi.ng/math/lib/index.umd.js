!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports):"function"==typeof define&&define.amd?define(["exports"],a):a(((t="undefined"!=typeof globalThis?globalThis:t||self).thi=t.thi||{},t.thi.ng=t.thi.ng||{},t.thi.ng.math={}))}(this,(function(t){"use strict";const a=Math.PI,i=2*a,n=a/2,s=a/3,r=a/4,e=a/6,o=1/a,h=1/i,u=1/n,c=a/180,M=180/a,l=(1+Math.sqrt(5))/2,d=Math.SQRT2,f=Math.sqrt(3),m=d/2,b=f/2;let p=1e-6;const x=t=>(t%=i)<0?i+t:t,g=t=>(t=Math.abs(t))>a?i-t:t,I=t=>{const a=t*t;return.99940307+a*(.03679168*a-.49558072)},T=t=>{switch((t%=i)<0&&(t=-t),t*u|0){case 0:return I(t);case 1:return-I(a-t);case 2:return-I(t-a);default:return I(i-t)}},v=Math.abs,R=Math.max,P=(t,a,i=p)=>v(t-a)<=i,q=(t,a,i,n)=>t<i&&a>n,D=(t,a,i,n)=>t>i&&a<n,S=(t,a,i)=>t>a&&a<i,_=(t,a,i)=>t<a&&a>i,C=(t,a,i=0,n=a.length)=>{n--;for(let s=i+1;s<n;s++)if(t(a[s-1],a[s],a[s+1]))return s;return-1},w=(t,a=0,i=t.length)=>C(S,t,a,i);function*H(t,a,i=0,n=a.length){for(;i<n;){const s=t(a,i,n);if(s<0)return;yield s,i=s+1}}const y=t=>t<0?0:t>1?1:t,A=t=>t<-1?-1:t>1?1:t,E=(t,a)=>0!==t?0!==a?Math.min(t,a):t:a,Q=(t,a,i)=>N(t,a,-i),N=(t,a,i)=>{const n=Math.exp(t*i),s=Math.exp(a*i);return(t*n+a*s)/(n+s)},F=(t,a,i)=>i!==a?(t-a)/(i-a):0,O=255,U=65535,L=t=>128&(t&=O)?t|~O:t,V=t=>32768&(t&=U)?t|~U:t,j=(t,a,i,n=16,s=8,r=0,e=1,o=p)=>{if(s<=0)return(r+e)/2;const h=(e-r)/n;let u=r,c=1/0;for(let s=0;s<=n;s++){const n=r+s*h,e=a(i,t(n));if(e<c){if(e<=o)return n;c=e,u=n}}return j(t,a,i,n,s-1,Math.max(u-h,0),Math.min(u+h,1))},k=(t,a,i)=>t+(a-t)*i,z=(t,a,i,n,s)=>{const r=s*s;return s*r*(-.5*t+1.5*a-1.5*i+(n*=.5))+r*(t-2.5*a+2*i-n)+s*(-.5*t+.5*i)+a},B=t=>(t=1-t,Math.sqrt(1-t*t)),G=t=>1-B(1-t),X=t=>0!==t?Math.sin(t)/t:1,Z=(t,a,i)=>i!=t?1/(1+Math.exp(-a*(i-t))):.5,W=t=>t-Math.floor(t),J=(t,a)=>0!==a?t/a:0;t.DEG2RAD=c,t.EPS=p,t.HALF_PI=n,t.INV_HALF_PI=u,t.INV_PI=o,t.INV_TAU=h,t.PHI=l,t.PI=a,t.QUARTER_PI=r,t.RAD2DEG=M,t.SIXTH=1/6,t.SIXTH_PI=e,t.SQRT2=d,t.SQRT2_2=m,t.SQRT2_3=b,t.SQRT3=f,t.TAU=i,t.THIRD=1/3,t.THIRD_PI=s,t.TWO_THIRD=2/3,t.absDiff=(t,a)=>Math.abs(t-a),t.absInnerAngle=g,t.absMax=(t,a)=>Math.abs(t)>Math.abs(a)?t:a,t.absMin=(t,a)=>Math.abs(t)<Math.abs(a)?t:a,t.absTheta=x,t.addi16=(t,a)=>V((0|t)+(0|a)),t.addi32=(t,a)=>(0|t)+(0|a)|0,t.addi8=(t,a)=>L((0|t)+(0|a)),t.addu16=(t,a)=>(t&U)+(a&U)&U,t.addu32=(t,a)=>(t>>>0)+(a>>>0)>>>0,t.addu8=(t,a)=>(t&O)+(a&O)&O,t.andi16=(t,a)=>V((0|t)&(0|a)),t.andi32=(t,a)=>(0|t)&(0|a),t.andi8=(t,a)=>L((0|t)&(0|a)),t.andu16=(t,a)=>t&U&a&U&U,t.andu32=(t,a)=>(t>>>0&a>>>0)>>>0,t.andu8=(t,a)=>t&O&a&O&O,t.angleDist=(t,a)=>g(x(a%i-t%i)),t.atan2Abs=(t,a)=>x(Math.atan2(t,a)),t.bounce=(t,a,i)=>{const s=i*t;return 1-a*Math.sin(s)/s*Math.cos(i*n)},t.ceilTo=(t,a=1)=>Math.ceil(t/a)*a,t.circular=B,t.clamp=(t,a,i)=>t<a?a:t>i?i:t,t.clamp0=t=>t>0?t:0,t.clamp01=y,t.clamp05=t=>t<0?0:t>.5?.5:t,t.clamp11=A,t.classifyCrossing=(t,a,i,n,s=p)=>P(t,i,s)&&P(a,n,s)?P(t,n,s)?"flat":"equal":q(t,a,i,n)?"over":D(t,a,i,n)?"under":"other",t.copysign=(t,a)=>Math.sign(a)*Math.abs(t),t.cosine=t=>1-(.5*Math.cos(t*a)+.5),t.cossin=(t,a=1)=>[Math.cos(t)*a,Math.sin(t)*a],t.cot=t=>1/Math.tan(t),t.csc=t=>1/Math.sin(t),t.cubicPulse=(t,a,i)=>(i=Math.abs(i-a))>t?0:1-(i/=t)*i*(3-2*i),t.decimated=(t,a)=>Math.floor(a*t)/t,t.deg=t=>t*M,t.derivative=(t,a=p)=>i=>(t(i+a)-t(i))/a,t.divi16=(t,a)=>V((0|t)/(0|a)),t.divi32=(t,a)=>(0|t)/(0|a)|0,t.divi8=(t,a)=>L((0|t)/(0|a)),t.divu16=(t,a)=>(t&U)/(a&U)&U,t.divu32=(t,a)=>(t>>>0)/(a>>>0)>>>0,t.divu8=(t,a)=>(t&O)/(a&O)&O,t.ease=(t,a)=>Math.pow(a,t),t.eqDelta=P,t.eqDeltaScaled=(t,a,i=p)=>v(t-a)<=i*R(1,v(t),v(a)),t.exp2=t=>2**t,t.expFactor=(t,a,i)=>(a/t)**(1/i),t.expStep=(t,a,i)=>1-Math.exp(-t*Math.pow(i,a)),t.fastCos=T,t.fastSin=t=>T(n-t),t.fdim=(t,a)=>Math.max(t-a,0),t.fit=(t,a,i,n,s)=>n+(s-n)*F(t,a,i),t.fit01=(t,a,i)=>a+(i-a)*y(t),t.fit10=(t,a,i)=>i+(a-i)*y(t),t.fit11=(t,a,i)=>a+(i-a)*(.5+.5*A(t)),t.fitClamped=(t,a,i,n,s)=>n+(s-n)*y(F(t,a,i)),t.floorTo=(t,a=1)=>Math.floor(t/a)*a,t.fma=(t,a,i)=>t*a+i,t.fmod=(t,a)=>t%a,t.foldback=(t,a)=>a<-t||a>t?Math.abs(Math.abs((a-t)%(4*t))-2*t)-t:a,t.fract=W,t.frexp=t=>{if(0===t||!isFinite(t))return[t,0];const a=Math.abs(t);let i=Math.max(-1023,Math.floor(Math.log2(a))+1),n=a*2**-i;for(;n<.5;)n*=2,i--;for(;n>=1;)n*=.5,i++;return[t<0?-n:n,i]},t.gain=(t,a)=>a<.5?.5*Math.pow(2*a,t):1-.5*Math.pow(2-2*a,t),t.gaussian=(t,a,i)=>Math.exp(-((i-t)**2)/(2*a*a)),t.impulse=(t,a)=>{const i=t*a;return i*Math.exp(1-i)},t.inOpenRange=(t,a,i)=>t>a&&t<i,t.inRange=(t,a,i)=>t>=a&&t<=i,t.invCircular=G,t.isCrossOver=q,t.isCrossUnder=D,t.isMaxima=_,t.isMinima=S,t.lanczos=(t,i)=>0!==i?-t<i&&i<t?X(a*i)*X(a*i/t):0:1,t.ldexp=(t,a)=>t*2**a,t.lens=(t,a,i)=>{const n=a>0?G:B,s=1-t,r=i<=t?n(i/t)*t:1-n((1-i)/s)*s;return k(i,r,Math.abs(a))},t.loc=(t,a,i)=>Math.sqrt(t*t+a*a-2*t*a*Math.cos(i)),t.lshifti16=(t,a)=>V((0|t)<<(0|a)),t.lshifti32=(t,a)=>(0|t)<<(0|a),t.lshifti8=(t,a)=>L((0|t)<<(0|a)),t.lshiftu16=(t,a)=>(t&U)<<(a&U)&U,t.lshiftu32=(t,a)=>t>>>0<<(a>>>0)>>>0,t.lshiftu8=(t,a)=>(t&O)<<(a&O)&O,t.max2id=(t,a)=>t>=a?0:1,t.max3id=(t,a,i)=>t>=a?t>=i?0:2:a>=i?1:2,t.max4id=(t,a,i,n)=>t>=a?t>=i?t>=n?0:3:i>=n?2:3:a>=i?a>=n?1:3:i>=n?2:3,t.maximaIndex=(t,a=0,i=t.length)=>C(_,t,a,i),t.maximaIndices=(t,a=0,i=t.length)=>H(w,t,a,i),t.min2id=(t,a)=>t<=a?0:1,t.min3id=(t,a,i)=>t<=a?t<=i?0:2:a<=i?1:2,t.min4id=(t,a,i,n)=>t<=a?t<=i?t<=n?0:3:i<=n?2:3:a<=i?a<=n?1:3:i<=n?2:3,t.minError=j,t.minNonZero2=E,t.minNonZero3=(t,a,i)=>E(E(t,a),i),t.minimaIndex=w,t.minimaIndices=(t,a=0,i=t.length)=>H(w,t,a,i),t.mix=k,t.mixBicubic=(t,a,i,n,s,r,e,o,h,u,c,M,l,d,f,m,b,p)=>z(z(t,a,i,n,b),z(s,r,e,o,b),z(h,u,c,M,b),z(l,d,f,m,b),p),t.mixBilinear=(t,a,i,n,s,r)=>{const e=1-s,o=1-r;return t*e*o+a*s*o+i*e*r+n*s*r},t.mixCubic=(t,a,i,n,s)=>{const r=s*s,e=1-s,o=e*e;return t*o*e+3*a*o*s+3*i*r*e+n*r*s},t.mixCubicHermite=(t,a,i,n,s)=>{const r=s-1,e=s*s,o=r*r;return(1+2*s)*o*t+s*o*a+e*(3-2*s)*i+e*r*n},t.mixCubicHermiteFromPoints=z,t.mixHermite=(t,a,i,n,s)=>{const r=.5*(i-t),e=1.5*(a-i)+.5*(n-t);return((e*s+t-a+r-e)*s+r)*s+a},t.mixQuadratic=(t,a,i,n)=>{const s=1-n;return t*s*s+2*a*s*n+i*n*n},t.mod=(t,a)=>t-a*Math.floor(t/a),t.muli16=(t,a)=>V((0|t)*(0|a)),t.muli32=(t,a)=>(0|t)*(0|a)|0,t.muli8=(t,a)=>L((0|t)*(0|a)),t.mulu16=(t,a)=>(t&U)*(a&U)&U,t.mulu32=(t,a)=>(t>>>0)*(a>>>0)>>>0,t.mulu8=(t,a)=>(t&O)*(a&O)&O,t.norm=F,t.normCos=t=>{const a=t*t;return 1+a*(2*a-4)},t.noti16=t=>V(~t),t.noti32=t=>~t,t.noti8=t=>L(~t),t.notu16=t=>~t&U,t.notu32=t=>~t>>>0,t.notu8=t=>~t&O,t.ori16=(t,a)=>V(0|t|a),t.ori32=(t,a)=>0|t|a,t.ori8=(t,a)=>L(0|t|a),t.oru16=(t,a)=>(t&U|a&U)&U,t.oru32=(t,a)=>(t>>>0|a>>>0)>>>0,t.oru8=(t,a)=>(t&O|a&O)&O,t.parabola=(t,a)=>Math.pow(4*a*(1-a),t),t.quadrant=t=>x(t)*u|0,t.rad=t=>t*c,t.remainder=(t,a)=>t-a*Math.round(t/a),t.roundEps=(t,a=p)=>{const i=W(t);return i<=a||i>=1-a?Math.round(t):t},t.roundTo=(t,a=1)=>Math.round(t/a)*a,t.rshifti16=(t,a)=>V((0|t)>>(0|a)),t.rshifti32=(t,a)=>(0|t)>>(0|a),t.rshifti8=(t,a)=>L((0|t)>>(0|a)),t.rshiftu16=(t,a)=>(t&U)>>>(a&U)&U,t.rshiftu32=(t,a)=>t>>>0>>>(a>>>0)>>>0,t.rshiftu8=(t,a)=>(t&O)>>>(a&O)&O,t.safeDiv=J,t.schlick=(t,a,i)=>i<=a?a*i/(i+t*(a-i)+p):(1-a)*(i-1)/(1-i-t*(a-i)+p)+1,t.sclamp=(t,a,i,n)=>Q(N(t,a,n),i,n),t.sec=t=>1/Math.cos(t),t.sigmoid=Z,t.sigmoid01=(t,a)=>Z(.5,t,a),t.sigmoid11=(t,a)=>Z(0,t,a),t.sign=(t,a=p)=>t>a?1:t<-a?-1:0,t.signExtend16=V,t.signExtend8=L,t.simplifyRatio=(t,a)=>{let i=Math.abs(t),n=Math.abs(a);for(;;){if(i<n){const t=i;i=n,n=t}const s=i%n;if(!s)return[t/n,a/n];i=s}},t.sinc=X,t.sincNormalized=(t,i)=>X(a*t*i),t.sincos=(t,a=1)=>[Math.sin(t)*a,Math.cos(t)*a],t.smax=N,t.smin=Q,t.smoothStep=(t,a,i)=>(3-2*(i=y((i-t)/(a-t))))*i*i,t.smootherStep=(t,a,i)=>(i=y((i-t)/(a-t)))*i*i*(i*(6*i-15)+10),t.solveCubic=(t,a,i,n,s=1e-9)=>{const r=t*t,e=a*a,o=a/(3*t),h=(3*t*i-e)/(3*r),u=(2*e*a-9*t*a*i+27*r*n)/(27*r*t);if(Math.abs(h)<s)return[Math.cbrt(-u)-o];if(Math.abs(u)<s)return h<0?[-Math.sqrt(-h)-o,-o,Math.sqrt(-h)-o]:[-o];{const t=u*u/4+h*h*h/27;if(Math.abs(t)<s)return[-1.5*u/h-o,3*u/h-o];if(t>0){const a=Math.cbrt(-u/2-Math.sqrt(t));return[a-h/(3*a)-o]}{const t=2*Math.sqrt(-h/3),a=Math.acos(3*u/h/t)/3,i=2*Math.PI/3;return[t*Math.cos(a)-o,t*Math.cos(a-i)-o,t*Math.cos(a-2*i)-o]}}},t.solveLinear=(t,a)=>J(-a,t),t.solveQuadratic=(t,a,i,n=1e-9)=>{const s=2*t;let r=a*a-4*t*i;return r<0?[]:r<n?[-a/s]:(r=Math.sqrt(r),[(-a-r)/s,(-a+r)/s])},t.step=(t,a)=>a<t?0:1,t.subi16=(t,a)=>V((0|t)-(0|a)),t.subi32=(t,a)=>(0|t)-(0|a)|0,t.subi8=(t,a)=>L((0|t)-(0|a)),t.subu16=(t,a)=>(t&U)-(a&U)&U,t.subu32=(t,a)=>(t>>>0)-(a>>>0)>>>0,t.subu8=(t,a)=>(t&O)-(a&O)&O,t.tangentCardinal=(t,a,i=.5,n=0,s=2)=>i*((a-t)/(s-n)),t.tangentDiff3=(t,a,i,n=0,s=1,r=2)=>.5*((i-a)/(r-s)+(a-t)/(s-n)),t.trunc=t=>t<0?Math.ceil(t):Math.floor(t),t.tween=(t,a,i)=>n=>k(a,i,t(n)),t.wrap=(t,a,i)=>{if(a===i)return a;if(t>i){const n=i-a;(t-=n)>i&&(t-=n*((t-a)/n|0))}else if(t<a){const n=i-a;(t+=n)<a&&(t+=n*((a-t)/n+1|0))}return t},t.wrap01=t=>t<0?t+1:t>1?t-1:t,t.wrap11=t=>t<-1?t+2:t>1?t-2:t,t.wrapOnce=(t,a,i)=>t<a?t-a+i:t>i?t-i+a:t,t.xori16=(t,a)=>V((0|t)^(0|a)),t.xori32=(t,a)=>(0|t)^(0|a),t.xori8=(t,a)=>L((0|t)^(0|a)),t.xoru16=(t,a)=>(t&U^a&U)&U,t.xoru32=(t,a)=>(t>>>0^a>>>0)>>>0,t.xoru8=(t,a)=>(t&O^a&O)&O,Object.defineProperty(t,"__esModule",{value:!0})}));